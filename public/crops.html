<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Crops - AgroAI</title>
    <link rel="stylesheet" href="style.css?v=2.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0ea5e9">
</head>
<body>
    <!-- Mobile Navigation Toggle -->
    <button class="mobile-nav-toggle" onclick="toggleMobileNav()" id="mobileNavToggle">
        <i class="fas fa-bars"></i>
    </button>

    <!-- Sidebar Navigation -->
    <nav class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <i class="fas fa-seedling"></i>
                <span>AgroAI</span>
            </div>
            <button class="sidebar-close" onclick="toggleMobileNav()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <ul class="nav-menu">
            <li class="nav-item">
                <a href="dashboard.html" class="nav-link">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="crops.html" class="nav-link active">
                    <i class="fas fa-leaf"></i>
                    <span>My Crops</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="files.html" class="nav-link">
                    <i class="fas fa-images"></i>
                    <span>Gallery</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link" onclick="showAnalytics()">
                    <i class="fas fa-chart-line"></i>
                    <span>Analytics</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#" class="nav-link" onclick="showWeather()">
                    <i class="fas fa-cloud-sun"></i>
                    <span>Weather</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#" onclick="logout()" class="nav-link">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </a>
            </li>
        </ul>
    </nav>

    <!-- Main Content -->
    <div class="main-wrapper">
        <header class="header">
            <div class="header-content">
                <div class="header-left">
                    <h1><i class="fas fa-leaf"></i> My Crops Dashboard</h1>
                    <p>Monitor and manage your agricultural portfolio with AI-powered insights</p>
                </div>
                <div class="header-right">
                    <button class="theme-toggle" onclick="toggleTheme()" title="Toggle Theme">
                        <i class="fas fa-moon"></i>
                    </button>
                    <button class="btn btn-primary" onclick="showAddCropModal()">
                        <i class="fas fa-plus"></i> Add New Crop
                    </button>
                </div>
            </div>
        </header>

        <main class="main-content">
            <!-- Enhanced Crops Overview Stats -->
            <section class="stats-section">
                <div class="stats-grid">
                    <div class="stat-card slide-up">
                        <div class="stat-icon">
                            <i class="fas fa-seedling"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-value" id="totalCrops">0</div>
                            <div class="stat-label">Total Crops</div>
                        </div>
                    </div>
                    <div class="stat-card slide-up">
                        <div class="stat-icon">
                            <i class="fas fa-heart" style="color: #10b981;"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-value" id="healthyCrops">0</div>
                            <div class="stat-label">Healthy Crops</div>
                        </div>
                    </div>
                    <div class="stat-card slide-up">
                        <div class="stat-icon">
                            <i class="fas fa-exclamation-triangle" style="color: #f59e0b;"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-value" id="warningCrops">0</div>
                            <div class="stat-label">Need Attention</div>
                        </div>
                    </div>
                    <div class="stat-card slide-up">
                        <div class="stat-icon">
                            <i class="fas fa-chart-line" style="color: #8b5cf6;"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-value" id="avgGrowth">0%</div>
                            <div class="stat-label">Avg Growth</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Enhanced Filter and Search -->
            <section class="filter-section slide-up">
                <div class="filter-container">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" placeholder="Search crops by name, type, or location..." id="cropSearch" onkeyup="filterCrops()">
                    </div>
                    <div class="filter-buttons">
                        <button class="filter-btn active" onclick="filterByStatus('all')" data-status="all">
                            <i class="fas fa-th"></i> All Crops
                        </button>
                        <button class="filter-btn" onclick="filterByStatus('healthy')" data-status="healthy">
                            <i class="fas fa-heart"></i> Healthy
                        </button>
                        <button class="filter-btn" onclick="filterByStatus('warning')" data-status="warning">
                            <i class="fas fa-exclamation-triangle"></i> Attention Needed
                        </button>
                        <button class="filter-btn" onclick="filterByStatus('critical')" data-status="critical">
                            <i class="fas fa-times-circle"></i> Critical
                        </button>
                        <button class="filter-btn" onclick="sortCrops('newest')" data-sort="newest">
                            <i class="fas fa-clock"></i> Newest First
                        </button>
                        <button class="filter-btn" onclick="sortCrops('health')" data-sort="health">
                            <i class="fas fa-sort-amount-down"></i> By Health
                        </button>
                    </div>
                </div>
            </section>

            <!-- Enhanced Crops Grid -->
            <section class="crops-section">
                <div class="crops-grid" id="cropsGrid">
                    <!-- Crops will be dynamically loaded here -->
                </div>
                
                <!-- Enhanced Empty State -->
                <div class="empty-state" id="emptyState" style="display: none;">
                    <div class="empty-icon">
                        <i class="fas fa-seedling"></i>
                    </div>
                    <h3>No Crops Found</h3>
                    <p>Ready to start your digital farming journey? Add your first crop and unlock the power of AI-driven agriculture!</p>
                    <button class="btn btn-primary btn-lg" onclick="showAddCropModal()">
                        <i class="fas fa-plus"></i> Add Your First Crop
                    </button>
                </div>
            </section>
        </main>
    </div>

    <!-- Enhanced Add Crop Modal -->
    <div class="modal" id="addCropModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-plus"></i> Add New Crop</h2>
                <button class="modal-close" onclick="hideAddCropModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="addCropForm" onsubmit="addNewCrop(event)">
                    <div class="form-group">
                        <label for="cropName"><i class="fas fa-tag"></i> Crop Name</label>
                        <input type="text" id="cropName" name="cropName" required placeholder="e.g., North Field Tomatoes">
                    </div>
                    <div class="form-group">
                        <label for="cropType"><i class="fas fa-leaf"></i> Crop Type</label>
                        <select id="cropType" name="cropType" required>
                            <option value="">Select crop type</option>
                            <option value="tomato">üçÖ Tomato</option>
                            <option value="wheat">üåæ Wheat</option>
                            <option value="rice">üåæ Rice</option>
                            <option value="corn">üåΩ Corn</option>
                            <option value="potato">ü•î Potato</option>
                            <option value="carrot">ü•ï Carrot</option>
                            <option value="lettuce">ü•¨ Lettuce</option>
                            <option value="onion">üßÖ Onion</option>
                            <option value="pepper">üå∂Ô∏è Pepper</option>
                            <option value="cucumber">ü•í Cucumber</option>
                            <option value="other">üå± Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="plantingDate"><i class="fas fa-calendar"></i> Planting Date</label>
                        <input type="date" id="plantingDate" name="plantingDate" required>
                    </div>
                    <div class="form-group">
                        <label for="cropArea"><i class="fas fa-ruler-combined"></i> Area (in acres)</label>
                        <input type="number" id="cropArea" name="cropArea" step="0.1" min="0.1" required placeholder="e.g., 2.5">
                    </div>
                    <div class="form-group">
                        <label for="cropLocation"><i class="fas fa-map-marker-alt"></i> Location</label>
                        <input type="text" id="cropLocation" name="cropLocation" required placeholder="e.g., North Field, Section A">
                    </div>
                    <div class="form-group">
                        <label for="cropVariety"><i class="fas fa-dna"></i> Variety (Optional)</label>
                        <input type="text" id="cropVariety" name="cropVariety" placeholder="e.g., Roma, Beefsteak">
                    </div>
                    <div class="form-group">
                        <label for="cropImage"><i class="fas fa-camera"></i> Crop Image</label>
                        <input type="file" id="cropImage" name="cropImage" accept="image/*">
                        <small class="form-help">Upload a recent photo of your crop (optional)</small>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="hideAddCropModal()">Cancel</button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-plus"></i> Add Crop
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Floating Add Button for Mobile -->
    <button class="add-crop-btn" onclick="showAddCropModal()" title="Add New Crop">
        <i class="fas fa-plus"></i>
    </button>

    <!-- Notification -->
    <div id="notification" class="notification"></div>

    <script src="dashboard.js"></script>
    <script src="crops.js"></script>
</body>
</html>