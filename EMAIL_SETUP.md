# 📧 Email Setup Guide for AgroAI

## Quick Start (Gmail)

1. **Get Gmail App Password**:
   - Go to your Google Account settings
   - Enable 2-factor authentication
   - Generate an "App Password" for AgroAI

2. **Set Environment Variables**:
   ```powershell
   # Windows PowerShell
   $env:EMAIL_USER="your-gmail@gmail.com"
   $env:EMAIL_PASS="your-16-digit-app-password"
   
   # Then start server
   node server.js
   ```

3. **Test Email**:
   - Login to your dashboard
   - Click "Test Email" button
   - Check your inbox!

## Features

✅ **Welcome Emails**: Sent automatically on user registration  
✅ **Daily Summaries**: AI-generated crop care reports sent every morning at 8 AM  
✅ **Manual Testing**: Test and send summaries instantly from dashboard  
✅ **Beautiful HTML**: Professional email templates with crop stats and AI tips  

## Email Content

### Welcome Email Includes:
- 🌱 Welcome message and platform introduction
- 🤖 AI capabilities explanation
- 📊 Feature highlights
- 🚀 Getting started guide
- 📧 Daily summary information

### Daily Summary Includes:
- 📈 Crop health statistics and trends
- 🎯 Action items for the day
- 🤖 AI-generated care tips for each crop type
- 📊 Recent analysis summaries
- 🚨 Alerts for crops needing attention

## Alternative Email Providers

### SendGrid (Recommended for Production)
```javascript
// In email-service.js, replace transporter with:
this.transporter = nodemailer.createTransporter({
  service: 'sendgrid',
  auth: {
    user: 'apikey',
    pass: process.env.SENDGRID_API_KEY
  }
});
```

### Outlook/Hotmail
```javascript
this.transporter = nodemailer.createTransporter({
  service: 'hotmail',
  auth: {
    user: process.env.EMAIL_USER,
    pass: process.env.EMAIL_PASS
  }
});
```

### Custom SMTP
```javascript
this.transporter = nodemailer.createTransporter({
  host: 'your-smtp-host.com',
  port: 587,
  secure: false,
  auth: {
    user: process.env.EMAIL_USER,
    pass: process.env.EMAIL_PASS
  }
});
```

## Environment Variables

Create a `.env` file in your project root:

```env
EMAIL_USER=your-email@gmail.com
EMAIL_PASS=your-app-password
NODE_ENV=development
```

## Troubleshooting

**"Authentication failed"**
- Enable 2-factor auth on Gmail
- Use App Password, not regular password
- Check email/password spelling

**"Connection timeout"**
- Check your internet connection
- Try different email service
- Verify SMTP settings

**"Daily emails not sending"**
- Server must run continuously for scheduled emails
- Check server logs for cron job execution
- Verify timezone settings (currently UTC)

**"Emails going to spam"**
- Use professional "from" address
- Add SPF/DKIM records (for custom domains)
- Ask users to whitelist your email

## Customization

### Change Daily Email Time
```javascript
// In email-service.js, modify cron schedule:
cron.schedule('0 6 * * *', async () => {
  // Runs at 6 AM instead of 8 AM
});
```

### Modify Email Templates
- Edit the HTML content in `email-service.js`
- Customize colors, layout, and content
- Add your logo/branding

### Add More Email Types
```javascript
// Example: Disease alert email
async sendDiseaseAlert(userEmail, cropName, disease) {
  const mailOptions = {
    subject: `🚨 Disease Alert: ${disease} detected in ${cropName}`,
    html: `Your AI analysis detected ${disease}...`
  };
  await this.transporter.sendMail(mailOptions);
}
```

## Production Tips

1. **Use Professional Email Service**: SendGrid, Mailgun, or Amazon SES
2. **Set Up SPF/DKIM**: For better delivery rates
3. **Monitor Bounce Rates**: Track email delivery success
4. **Add Unsubscribe**: Include unsubscribe links (required by law)
5. **Rate Limiting**: Don't send too many emails at once

## Dashboard Features

From your dashboard, you can:
- 📧 **Test Email**: Send instant test email to verify setup
- 📊 **Daily Summary**: Generate and send summary manually
- 🔧 **Email Settings**: (Future feature) Manage email preferences
- 📈 **Email Stats**: (Future feature) Track delivery rates

---

**Email powered by Nodemailer** 📧  
**AI content generated by Hack Club GPT-4** 🤖